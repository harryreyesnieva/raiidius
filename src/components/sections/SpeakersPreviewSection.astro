---
import type { Edition } from "../../content/types";
import Card from "../ui/Card.astro";
import Badge from "../ui/Badge.astro";
import Button from "../ui/Button.astro";
import Icon from "../Icon.astro";

export interface Props { year: number; edition: Edition; }
const { year, edition } = Astro.props;

const speakers = (edition.speakers ?? []).slice(0, 6);
---
<section class="border-b border-border bg-card px-4 py-16 lg:px-6">
  <div class="mx-auto max-w-7xl">
    <div class="flex flex-col items-center gap-3 text-center">
      <h2 class="text-2xl font-bold text-foreground">Featured speakers</h2>
      <p class="max-w-2xl text-sm text-muted-foreground">
        Preview of confirmed and invited contributors. Full speaker list on the Speakers page.
      </p>
    </div>

    {speakers.length ? (
      <div class="mt-10 grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {speakers.map((s) => (
          <Card class="h-full">
            <div class="p-6">
              <div class="flex items-start gap-4">
                <div class="h-12 w-12 shrink-0 overflow-hidden rounded-full border border-border bg-muted">
                  <img src={`${import.meta.env.BASE_URL}${s.headshot ?? "placeholder.svg"}`} alt="" class="h-full w-full object-cover" />
                </div>
                <div class="min-w-0">
                  <div class="flex flex-wrap items-center gap-2">
                    <div class="truncate text-base font-semibold text-foreground">{s.name}</div>
                    <Badge variant="secondary" class="capitalize">{s.role}</Badge>
                  </div>
                  <div class="mt-1 text-sm text-muted-foreground">{s.affiliation}</div>
                  <div class="mt-3 flex flex-wrap gap-2">
                    {(s.keywords ?? []).slice(0, 3).map((k) => (
                      <Badge variant="outline">{k}</Badge>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </Card>
        ))}
      </div>
    ) : (
      <div class="mt-10 rounded-lg border border-border bg-background p-8 text-center text-sm text-muted-foreground">
        Speaker announcements coming soon.
      </div>
    )}

    <div class="mt-10 flex justify-center">
      <Button href={`${import.meta.env.BASE_URL}${year}/speakers/`} variant="outline">
        Browse all speakers
        <Icon name="ArrowRight" class="h-4 w-4" />
      </Button>
    </div>
  </div>
</section>
